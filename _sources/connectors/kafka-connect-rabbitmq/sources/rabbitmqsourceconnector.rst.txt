=======================
RabbitMQSourceConnector
=======================

Connector is used to read from a RabbitMQ Queue or Topic.



-------------
Configuration
-------------

+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| kafka.topic                           | :ref:`configuration-string`  | High       |               |           | Kafka topic to write the messages to.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.queue                        | :ref:`configuration-list`    | High       |               |           | rabbitmq.queue                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.host                         | :ref:`configuration-string`  | High       | localhost     |           | The RabbitMQ host to connect to. See [ConnectionFactory.setHost(java.lang.String)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setHost-java.lang.String-)                                                                                                                                                                                                                                                                                                                                                                                            |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.password                     | :ref:`configuration-string`  | High       | guest         |           | The password to authenticate to RabbitMQ with. See [ConnectionFactory.setPassword(java.lang.String)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setPassword-java.lang.String-)                                                                                                                                                                                                                                                                                                                                                                      |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.username                     | :ref:`configuration-string`  | High       | guest         |           | The username to authenticate to RabbitMQ with. See [ConnectionFactory.setUsername(java.lang.String)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setUsername-java.lang.String-)                                                                                                                                                                                                                                                                                                                                                                      |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.virtual.host                 | :ref:`configuration-string`  | High       | /             |           | The virtual host to use when connecting to the broker. See [ConnectionFactory.setVirtualHost(java.lang.String)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setVirtualHost-java.lang.String-)                                                                                                                                                                                                                                                                                                                                                        |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.port                         | :ref:`configuration-int`     | Medium     | 5672          |           | The RabbitMQ port to connect to. See [ConnectionFactory.setPort(int)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setPort-int-)                                                                                                                                                                                                                                                                                                                                                                                                                      |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.prefetch.count               | :ref:`configuration-int`     | Medium     | 0             |           | Maximum number of messages that the server will deliver, 0 if unlimited. See [Channel.basicQos(int, boolean)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/Channel.html#basicQos-int-boolean-)                                                                                                                                                                                                                                                                                                                                                                               |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.prefetch.global              | :ref:`configuration-boolean` | Medium     | false         |           | True if the settings should be applied to the entire channel rather than each consumer. See [Channel.basicQos(int, boolean)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/Channel.html#basicQos-int-boolean-)                                                                                                                                                                                                                                                                                                                                                                |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.automatic.recovery.enabled   | :ref:`configuration-boolean` | Low        | true          |           | Enables or disables automatic connection recovery. See [ConnectionFactory.setAutomaticRecoveryEnabled(boolean)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setAutomaticRecoveryEnabled-boolean-)                                                                                                                                                                                                                                                                                                                                                    |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.connection.timeout.ms        | :ref:`configuration-int`     | Low        | 60000         |           | Connection TCP establishment timeout in milliseconds. zero for infinite. See [ConnectionFactory.setConnectionTimeout(int)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setConnectionTimeout-int-)                                                                                                                                                                                                                                                                                                                                                    |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.handshake.timeout.ms         | :ref:`configuration-int`     | Low        | 10000         |           | The AMQP0-9-1 protocol handshake timeout, in milliseconds. See [ConnectionFactory.setHandshakeTimeout(int)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setHandshakeTimeout-int-)                                                                                                                                                                                                                                                                                                                                                                    |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.network.recovery.interval.ms | :ref:`configuration-int`     | Low        | 10000         |           | See [ConnectionFactory.setNetworkRecoveryInterval(long)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setNetworkRecoveryInterval-long-)                                                                                                                                                                                                                                                                                                                                                                                                               |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.requested.channel.max        | :ref:`configuration-int`     | Low        | 0             |           | Initially requested maximum channel number. Zero for unlimited. See [ConnectionFactory.setRequestedChannelMax(int)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setRequestedChannelMax-int-)                                                                                                                                                                                                                                                                                                                                                         |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.requested.frame.max          | :ref:`configuration-int`     | Low        | 0             |           | Initially requested maximum frame size, in octets. Zero for unlimited. See [ConnectionFactory.setRequestedFrameMax(int)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setRequestedFrameMax-int-)                                                                                                                                                                                                                                                                                                                                                      |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.requested.heartbeat.seconds  | :ref:`configuration-int`     | Low        | 60            |           | Set the requested heartbeat timeout. Heartbeat frames will be sent at about 1/2 the timeout interval. If server heartbeat timeout is configured to a non-zero value, this method can only be used to lower the value; otherwise any value provided by the client will be used. See [ConnectionFactory.setRequestedHeartbeat(int)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setRequestedHeartbeat-int-)                                                                                                                                            |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.shutdown.timeout.ms          | :ref:`configuration-int`     | Low        | 10000         |           | Set the shutdown timeout. This is the amount of time that Consumer implementations have to continue working through deliveries (and other Consumer callbacks) after the connection has closed but before the ConsumerWorkService is torn down. If consumers exceed this timeout then any remaining queued deliveries (and other Consumer callbacks, *including* the Consumer's handleShutdownSignal() invocation) will be lost. See [ConnectionFactory.setShutdownTimeout(int)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setShutdownTimeout-int-) |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| rabbitmq.topology.recovery.enabled    | :ref:`configuration-boolean` | Low        | true          |           | Enables or disables topology recovery. See [ConnectionFactory.setTopologyRecoveryEnabled(boolean)](https://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/ConnectionFactory.html#setTopologyRecoveryEnabled-boolean-)                                                                                                                                                                                                                                                                                                                                                                  |
+---------------------------------------+------------------------------+------------+---------------+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

^^^^^^^^^^^^^^^^^^^^^^
Property based example
^^^^^^^^^^^^^^^^^^^^^^


This configuration is used typically along with `standalone mode
<http://docs.confluent.io/current/connect/concepts.html#standalone-workers>`_.

.. code-block:: properties

    name=connector1
    tasks.max=1
    connector.class=com.github.jcustenborder.kafka.connect.rabbitmq.RabbitMQSourceConnector
    # The following values must be configured.
    kafka.topic=
    rabbitmq.queue=



^^^^^^^^^^^^^^^^^^
Rest based example
^^^^^^^^^^^^^^^^^^


This configuration is used typically along with `distributed mode
<http://docs.confluent.io/current/connect/concepts.html#distributed-workers>`_.
Write the following json to `connector.json` and use the command below to post the configuration to the distributed connect workers.

.. code-block:: json

    {
        "name": "connector1",
        "config": {
            "connector.class": "com.github.jcustenborder.kafka.connect.rabbitmq.RabbitMQSourceConnector",
            "kafka.topic":"",
            "rabbitmq.queue":"",
        }
    }

Use curl to post the configuration to one of the Kafka Connect Workers. Change `http://localhost:8083/` the the endpoint of
one of your Kafka Connect workers.

.. code-block:: bash

    curl -s -X POST -H 'Content-Type: application/json' --data @connector.json http://localhost:8083/connectors



