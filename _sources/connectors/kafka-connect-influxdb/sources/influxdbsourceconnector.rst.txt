=======================
InfluxDBSourceConnector
=======================

The InfluxDBSourceConnector is used to emulate an InfluxDB host and receive messages written by an InfluxDB client.


.. IMPORTANT::
    This connector listens on a network port. Running more than one task or running in distributed mode can cause some undesired effects if another task already has the port open. It is recommended that you run this connector in :term:`Standalone Mode`.



-------------
Configuration
-------------

+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| http.enable                | :ref:`configuration-boolean`  | High       | true          |                                  | Flag to determine if http should be enabled.                                      |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| http.port                  | :ref:`configuration-int`      | High       | 8080          | ValidPort{start=1000, end=65535} | Port the http listener should be started on.                                      |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| https.enable               | :ref:`configuration-boolean`  | High       | false         |                                  | Flag to determine if https should be enabled.                                     |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| https.port                 | :ref:`configuration-int`      | High       | 8443          | ValidPort{start=1000, end=65535} | Port the https listener should be started on.                                     |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| topic.prefix               | :ref:`configuration-string`   | High       | influxdb.     |                                  |                                                                                   |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| allowed.databases          | :ref:`configuration-list`     | Medium     | []            |                                  |                                                                                   |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| health.check.enable        | :ref:`configuration-boolean`  | Medium     | true          |                                  | Flag to determine if a health check url for a load balancer should be configured. |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| health.check.path          | :ref:`configuration-string`   | Medium     | /healthcheck  |                                  | Path that will respond with a health check.                                       |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| https.key.manager.password | :ref:`configuration-password` | Medium     | [hidden]      |                                  | The key manager password.                                                         |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| https.key.store.password   | :ref:`configuration-password` | Medium     | [hidden]      |                                  | The password for the ssl keystore.                                                |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| https.key.store.path       | :ref:`configuration-string`   | Medium     |               |                                  | Path on the local filesystem that contains the ssl keystore.                      |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| https.trust.store.password | :ref:`configuration-password` | Medium     | [hidden]      |                                  | The password for the ssl trust store.                                             |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| https.trust.store.path     | :ref:`configuration-string`   | Medium     |               |                                  | The key manager password.                                                         |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| thread.pool.max.size       | :ref:`configuration-int`      | Medium     | 100           | [10,...,1000]                    | The maximum number of threads for the thread pool to allocate.                    |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| thread.pool.min.size       | :ref:`configuration-int`      | Medium     | 10            | [10,...,1000]                    | The minimum number of threads for the thread pool to allocate.                    |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| http.idle.timeout.ms       | :ref:`configuration-int`      | Low        | 30000         | [5000,...,300000]                | The number of milliseconds idle before a connection has timed out.                |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+
| https.idle.timeout.ms      | :ref:`configuration-int`      | Low        | 30000         | [5000,...,300000]                | The number of milliseconds idle before a connection has timed out.                |
+----------------------------+-------------------------------+------------+---------------+----------------------------------+-----------------------------------------------------------------------------------+

^^^^^^^^^^^^^^^^^^^^^^
Property based example
^^^^^^^^^^^^^^^^^^^^^^


This configuration is used typically along with `standalone mode
<http://docs.confluent.io/current/connect/concepts.html#standalone-workers>`_.

.. code-block:: properties

    name=connector1
    tasks.max=1
    connector.class=com.github.jcustenborder.kafka.connect.influxdb.InfluxDBSourceConnector
    # The following values must be configured.



^^^^^^^^^^^^^^^^^^
Rest based example
^^^^^^^^^^^^^^^^^^


This configuration is used typically along with `distributed mode
<http://docs.confluent.io/current/connect/concepts.html#distributed-workers>`_.
Write the following json to `connector.json` and use the command below to post the configuration to the distributed connect workers.

.. code-block:: json

    {
        "name": "connector1",
        "config": {
            "connector.class": "com.github.jcustenborder.kafka.connect.influxdb.InfluxDBSourceConnector",
        }
    }

Use curl to post the configuration to one of the Kafka Connect Workers. Change `http://localhost:8083/` the the endpoint of
one of your Kafka Connect workers.

.. code-block:: bash

    curl -s -X POST -H 'Content-Type: application/json' --data @connector.json http://localhost:8083/connectors



