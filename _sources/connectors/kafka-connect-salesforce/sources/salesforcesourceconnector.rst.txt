=========================
SalesforceSourceConnector
=========================

The SalesforceSourceConnector is used to read changes from Salesforce in realtime.



-------------
Configuration
-------------

+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| kafka.topic                           | :ref:`configuration-string`   | High       |               |                                          | The Kafka topic to write the SalesForce data to. This is a template driven by the data returned by Salesforce. Any field in the schema can be used but you should always pick a value that is guarenteed to be there. `_EventType` and `_ObjectType` are two metadata fields that are included on every record. For example you could put update and deletes in a different topic by using `salesforce.${_ObjectType}.${_EventType}` |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.consumer.key               | :ref:`configuration-string`   | High       |               |                                          | The consumer key for the OAuth application.                                                                                                                                                                                                                                                                                                                                                                                          |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.consumer.secret            | :ref:`configuration-password` | High       |               |                                          | The consumer secret for the OAuth application.                                                                                                                                                                                                                                                                                                                                                                                       |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.object                     | :ref:`configuration-string`   | High       |               |                                          | The Salesforce object to create a topic for.                                                                                                                                                                                                                                                                                                                                                                                         |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.password                   | :ref:`configuration-password` | High       |               |                                          | Salesforce password to connect with.                                                                                                                                                                                                                                                                                                                                                                                                 |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.password.token             | :ref:`configuration-password` | High       |               |                                          | The Salesforce security token associated with the username.                                                                                                                                                                                                                                                                                                                                                                          |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.push.topic.name            | :ref:`configuration-string`   | High       |               |                                          | The Salesforce topic to subscribe to. If salesforce.push.topic.create is set to true, a PushTopic with this name will be created.                                                                                                                                                                                                                                                                                                    |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.username                   | :ref:`configuration-string`   | High       |               |                                          | Salesforce username to connect with.                                                                                                                                                                                                                                                                                                                                                                                                 |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| kafka.topic.lowercase                 | :ref:`configuration-boolean`  | High       | true          |                                          | Flag to determine if the kafka topic should be lowercased.                                                                                                                                                                                                                                                                                                                                                                           |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.instance                   | :ref:`configuration-string`   | High       |               |                                          | The Salesforce instance to connect to.                                                                                                                                                                                                                                                                                                                                                                                               |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| connection.timeout                    | :ref:`configuration-long`     | Low        | 30000         | [5000,...,600000]                        | The amount of time to wait while connecting to the Salesforce streaming endpoint.                                                                                                                                                                                                                                                                                                                                                    |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| curl.logging                          | :ref:`configuration-boolean`  | Low        | false         |                                          | If enabled the logs will output the equivalent curl commands. This is a security risk because your authorization header will end up in the log file. Use at your own risk.                                                                                                                                                                                                                                                           |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.push.topic.create          | :ref:`configuration-boolean`  | Low        | true          |                                          | Flag to determine if the PushTopic should be created if it does not exist.                                                                                                                                                                                                                                                                                                                                                           |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.push.topic.notify.create   | :ref:`configuration-boolean`  | Low        | true          |                                          | Flag to determine if the PushTopic should respond to creates.                                                                                                                                                                                                                                                                                                                                                                        |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.push.topic.notify.delete   | :ref:`configuration-boolean`  | Low        | true          |                                          | Flag to determine if the PushTopic should respond to deletes.                                                                                                                                                                                                                                                                                                                                                                        |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.push.topic.notify.undelete | :ref:`configuration-boolean`  | Low        | true          |                                          | Flag to determine if the PushTopic should respond to undeletes.                                                                                                                                                                                                                                                                                                                                                                      |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.push.topic.notify.update   | :ref:`configuration-boolean`  | Low        | true          |                                          | Flag to determine if the PushTopic should respond to updates.                                                                                                                                                                                                                                                                                                                                                                        |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| salesforce.version                    | :ref:`configuration-string`   | Low        | latest        | ValidPattern{pattern=^(latest|[\d\.]+)$} | The version of the salesforce API to use.                                                                                                                                                                                                                                                                                                                                                                                            |
+---------------------------------------+-------------------------------+------------+---------------+------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

^^^^^^^^^^^^^^^^^^^^^^
Property based example
^^^^^^^^^^^^^^^^^^^^^^


This configuration is used typically along with `standalone mode
<http://docs.confluent.io/current/connect/concepts.html#standalone-workers>`_.

.. code-block:: properties

    name=connector1
    tasks.max=1
    connector.class=com.github.jcustenborder.kafka.connect.salesforce.SalesforceSourceConnector
    # The following values must be configured.
    kafka.topic=
    salesforce.consumer.key=
    salesforce.consumer.secret=
    salesforce.object=
    salesforce.password=
    salesforce.password.token=
    salesforce.push.topic.name=
    salesforce.username=



^^^^^^^^^^^^^^^^^^
Rest based example
^^^^^^^^^^^^^^^^^^


This configuration is used typically along with `distributed mode
<http://docs.confluent.io/current/connect/concepts.html#distributed-workers>`_.
Write the following json to `connector.json` and use the command below to post the configuration to the distributed connect workers.

.. code-block:: json

    {
        "name": "connector1",
        "config": {
            "connector.class": "com.github.jcustenborder.kafka.connect.salesforce.SalesforceSourceConnector",
            "kafka.topic":"",
            "salesforce.consumer.key":"",
            "salesforce.consumer.secret":"",
            "salesforce.object":"",
            "salesforce.password":"",
            "salesforce.password.token":"",
            "salesforce.push.topic.name":"",
            "salesforce.username":"",
        }
    }

Use curl to post the configuration to one of the Kafka Connect Workers. Change `http://localhost:8083/` the the endpoint of
one of your Kafka Connect workers.

.. code-block:: bash

    curl -s -X POST -H 'Content-Type: application/json' --data @connector.json http://localhost:8083/connectors



