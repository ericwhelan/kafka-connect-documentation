=====================
HttpSolrSinkConnector
=====================

.. image:: HttpSolrSinkConnector.svg


This connector is used to connect to write directly to a Solr core.



-------------
Configuration
-------------

.. csv-table:: Configuration
    :header: "Name", "Type", "Importance", "Default Value", "Validator", "Documentation"
    :widths: auto

    "solr.url","String","High","","","Url to connect to solr with."
    "solr.password","Password","High","[hidden]","","The password to use for basic authentication."
    "solr.username","String","High","","","The username to use for basic authentication."
    "solr.delete.documents.enabled","Boolean","Medium","true","","Flag to determine if the connector should delete documents. General practice in Kafka is to treat a record that contains a key with a null value as a delete."
    "solr.queue.size","Int","Medium","100","[1,...,2147483647]","The number of documents to batch together before sending to Solr. See `ConcurrentUpdateSolrClient.Builder.withQueueSize(int) <https://lucene.apache.org/solr/6_3_0/solr-solrj/org/apache/solr/client/solrj/impl/ConcurrentUpdateSolrClient.Builder.html#withQueueSize-int->`_"
    "solr.thread.count","Int","Medium","1","[1,...,100]","The number of threads used to empty ConcurrentUpdateSolrClients queue. See `ConcurrentUpdateSolrClient.Builder.withThreadCount(int) <https://lucene.apache.org/solr/6_3_0/solr-solrj/org/apache/solr/client/solrj/impl/ConcurrentUpdateSolrClient.Builder.html#withThreadCount-int->`_"
    "solr.commit.within","Int","Low","-1","","Configures Solr UpdaterRequest for a commit within the requested number of milliseconds ."


^^^^^^^^^^^^^^^^^^^^^^
Property based example
^^^^^^^^^^^^^^^^^^^^^^


This configuration is used typically along with `standalone mode
<http://docs.confluent.io/current/connect/concepts.html#standalone-workers>`_.

.. code-block:: properties

    name=connector1
    tasks.max=1
    connector.class=com.github.jcustenborder.kafka.connect.solr.HttpSolrSinkConnector
    # The following values must be configured.
    solr.url=



^^^^^^^^^^^^^^^^^^
Rest based example
^^^^^^^^^^^^^^^^^^


This configuration is used typically along with `distributed mode
<http://docs.confluent.io/current/connect/concepts.html#distributed-workers>`_.
Write the following json to `connector.json`, configure all of the required values, and use the command below to
post the configuration to one the distributed connect worker(s).

.. code-block:: json

    {
        "name": "connector1",
        "config": {
            "connector.class": "com.github.jcustenborder.kafka.connect.solr.HttpSolrSinkConnector",
            "solr.url":"",
        }
    }

Use curl to post the configuration to one of the Kafka Connect Workers. Change `http://localhost:8083/` the the endpoint of
one of your Kafka Connect worker(s).

.. code-block:: bash

    curl -s -X POST -H 'Content-Type: application/json' --data @connector.json http://localhost:8083/connectors



